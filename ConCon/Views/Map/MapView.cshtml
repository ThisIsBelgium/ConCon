@{
    ViewBag.Title = "MapView";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Google Maps View of Events</h2>
<h4>Click points for more infomation</h4>



<div id="map" style="width:100%;height:450px"></div>
<script>
    //Create map and info windows
    function myMap() {
        var eventInfo = '<div id="content">' +
            '<div id="siteNotice">' +
            '</div>' +
            '<h1 id="firstHeading" class="firstHeading">Event Information</h1>' +
            '<div id="bodyContent">' +
            '<p>Artist Name: </p>' +
            '<p>Event Address: </p>' +
            '<p>Venue Name: </p>' +
            '<p><a href="http://www.ticketmaster.com">Buy Tickets</a></p> ' +
            '</div>' +
            '</div>';
        var mapCanvas = document.getElementById("map");
        var myCenter = new google.maps.LatLng(43.0341340, -87.911953087);
        var mapOptions = { center: myCenter, zoom: 10 };
        var map = new google.maps.Map(mapCanvas, mapOptions);

        //User Location
        var marker = new google.maps.Marker({
            position: myCenter
        });

        //Event Location
        //foreach event... run this method
        var eventLat = 43.057665
        var eventLong = -87.881014
        var eventLoc = new google.maps.LatLng(43.057665, -87.881014);
        var EventMarker = new google.maps.Marker({
            position: eventLoc           
        });

        //User current location
        marker.setMap(map);
        google.maps.event.addListener(marker, 'click', function () {
            var infowindow = new google.maps.InfoWindow({
                content:
                eventInfo
            });
            infowindow.open(map, marker);
        });

        //Event Locations
        //eventLoc.setMap(map);
        //google.maps.event.addListener(eventLoc, 'click', function () {
        //    var eventInfoWindow = new google.maps.InfoWindow({
        //        content:
        //        "Event Address"
        //    });
        //    eventInfoWindow.open(map, eventLoc);
        //});

    }
    
   


    //Set route on click

    //function calculateAndDisplayRoute(directionsService, directionsDisplay) {
    //    directionsService.route({
    //        origin: document.getElementById('start').value,
    //        destination: document.getElementById('end').value,
    //        travelMode: 'DRIVING'
    //    }, function (response, status) {
    //        if (status === 'OK') {
    //            directionsDisplay.setDirections(response);
    //        } else {
    //            window.alert('Directions request failed due to ' + status);
    //        }
    //    });
    //}




    //function calculateAndDisplayRoute(directionsService, directionsDisplay) {
    //    var waypts = [];
    //    var checkboxArray = document.getElementById('waypoints');
    //    for (var i = 0; i < checkboxArray.length; i++) {
    //        if (checkboxArray.options[i].selected) {
    //            waypts.push({
    //                location: checkboxArray[i].value,
    //                stopover: true
    //            });
    //        }
    //    }
    //    directionsService.route({
    //        origin: document.getElementById('start').value,
    //        destination: document.getElementById('end').value,
    //        waypoints: waypts,
    //        optimizeWaypoints: true,
    //        travelMode: 'DRIVING'
    //    }, function (response, status) {
    //        if (status === 'OK') {
    //            directionsDisplay.setDirections(response);
    //            var route = response.routes[0];
    //            var summaryPanel = document.getElementById('directions-panel');
    //            summaryPanel.innerHTML = '';
    //            // For each route, display summary information.
    //            for (var i = 0; i < route.legs.length; i++) {
    //                var routeSegment = i + 1;
    //                summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
    //                    '</b><br>';
    //                summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
    //                summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
    //                summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
    //            }
    //        } else {
    //            window.alert('Directions request failed due to ' + status);
    //        }
    //    });
    //}

</script>
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBoWyD7kP_Xc4sflnZ2w7kYzaHbUlDxok&callback=myMap"></script>